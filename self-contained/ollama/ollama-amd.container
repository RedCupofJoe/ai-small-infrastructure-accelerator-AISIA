[Unit]
Description=Ollama (AMD ROCm) - Podman Quadlet
After=network-online.target
Wants=network-online.target

[Container]
Image=docker.io/ollama/ollama:latest
PublishPort=127.0.0.1:11404:11434
Volume=%h/.ollama:/root/.ollama:Z

# Map AMD devices (adjust if your paths differ)
AddDevice=/dev/kfd
AddDevice=/dev/dri

# Optional envs
Environment=OLLAMA_HOST=0.0.0.0
Environment=OLLAMA_KEEP_ALIVE=10m

Label=io.containers.autoupdate=registry
Restart=on-failure
StopTimeout=60

[Service]
RestartSec=3

[Install]
WantedBy=default.target
